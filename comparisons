import netmiko
import getpass
import difflib

MenuInfo ={
  'device_type':'',
  'host':'192.168.56.101',
  'username':'cisco',
  'password':'cisco123!',
  'secret':'class123!'
}

print('**device script**')
MenuInfo["password"] = getpass.getpass("Enter device Password")
MenuInfo["secret"] = getpass.getpass("Enter device Secret")

MenuType = input("Do you want to connect to SSH (A) or Do you want to connect to Telnet (B)")
if MenuType == "A":
    MenuInfo["device_type"] = "cisco_ios"
    session = netmiko.ConnectHandler(**MenuInfo)
    session.enable()
    print("session has been enabled")
    commandOutput = session.send_command('sh running-config')
    startupOutput = session.send_command('sh startup-config')
    file = open("config.txt", "w")
    file.write(commandOutput)
    file.close()
    print ("File saved")

    choice = input("Please pick option 1 to compare against the current start config or choose 2 to compare against a local offline cofig.")
    if choice == "1":
        for diff in difflib.context_diff(commandOutput.split("\n"), startupOutput.split("\n")):
            print(diff)
    if choice == "2":
        backupfile = open("config.txt", "r")
        for diff in difflib.context_diff(commandOutput.splt("\n"), backupfile.readlines()):
            print(diff)


elif MenuType == "B":
    MenuInfo['device_type'] = 'cisco_ios_telnet'
    session = netmiko.ConnectHandler(**MenuInfo)
    session.enable()
    print(session.send_command('sh ip int br'))

